{% extends 'base.html' %}

{% block content %}
<section class="player_report_outer_container">
    <section class="player_report">
        <section class="player_report_header">
            <div class="player_report_team_container">
                <img class="team_logo" src="{{ url_for('static', filename='img/' + player_xgoals_data['team_abbreviation'] + '.png') }}">
            </div>
            <div class="player_report_name_container">
                <h1 class="player_name_report">
                    {{player_xgoals_data['player_first_name']}}<br/>
                </h1>
                <h1 class="player_name_report">
                    {{player_xgoals_data['player_last_name']}}<br/>
                </h1>
                <h2 class="player_report_name_subheader">{{player_xgoals_data['team_name']}} - {{player_xgoals_data['primary_general_position']}}</h2>
                <h2 class="player_report_name_subheader">{{player_xgoals_data['nationality']}}</h2>
                
            </div>
        </section>
        
        <!-- XGoals -->
        {% for stat, label in [
            ('xgoals_xassists_per_90', 'XG/XP/90'),
            ('minutes_played', 'Minutes Played'),
            ('shots', 'Shots'),
            ('shots_on_target', 'Shots on Target'),
            ('shots_on_target_perc', 'Shots on Target %'),
            ('goals', 'Goals'),
            ('xgoals', 'Expected Goals (xG)'),
            ('xplace', 'xPlace'),
            ('goals_minus_xgoals', 'Goals - xGoals'),
            ('key_passes', 'Key Passes'),
            ('primary_assists', 'Primary Assists'),
            ('xassists', 'Expected Assists (xA)'),
            ('primary_assists_minus_xassists', 'Primary Assists - xAssists'),
            ('xgoals_plus_xassists', 'xGoals + xAssists'),
            ('points_added', 'Points Added'),
            ('xpoints_added', 'Expected Points Added')
        ] %}
            {% if player_xgoals_data[stat] >= player_xgoals_data['avg_' + stat] %}
            <span class="stat_block above_avg">
            {% else %}
            <span class="stat_block below_avg">
            {% endif %}
            <h4>{{ label }}</h4>
            <p class="stat_text">Value: {{ player_xgoals_data[stat] }}</p>
            <p class="stat_text">Average: {{ player_xgoals_data['avg_' + stat] }}</p>
            </span>
        {% endfor %}
        
        <!-- XPass -->
        <h2>XPass</h2>
        {% for stat, label in [
            ('count_games', 'Games Played'),
            ('attempted_passes', 'Attempted Passes'),
            ('pass_completion_percentage', 'Pass Completion Percentage'),
            ('xpass_completion_percentage', 'xPass Completion Percentage'),
            ('passes_completed_over_expected', 'Passes Completed Over Expected'),
            ('passes_completed_over_expected_p100', 'Passes Completed Over Expected per 100'),
            ('avg_distance_yds', 'Average Distance (yds)'),
            ('avg_vertical_distance_yds', 'Average Vertical Distance (yds)'),
            ('share_team_touches', 'Share of Team Touches')
        ] %}
            {% if player_xpass_data[stat] >= player_xpass_data['avg_' + stat] %}
            <span class="stat_block above_avg">
            {% else %}
            <span class="stat_block below_avg">
            {% endif %}
            <h4>{{ label }}</h4>
            <p class="stat_text">Value: {{ player_xpass_data[stat] }}</p>
            <p class="stat_text">Average: {{ player_xpass_data['avg_' + stat] }}</p>
            </span>
        {% endfor %}
        

        <!-- Player Goals Added -->
        <h2>Goals Added</h2>
        Dribbling Goals Add Raw: {{player_goals_added_data['dribbling_goals_added_raw']}} <br/>
        Dribbling Goals Added Above Average: {{player_goals_added_data['dribbling_goals_added_above_avg']}} <br/>
        Dribbling Count Actions: {{player_goals_added_data['dribbling_count_actions']}} <br/>
        Fouling Goals Added Raw: {{player_goals_added_data['fouling_goals_added_raw']}} <br/>
        Fouling Goals Added Above Average: {{player_goals_added_data['fouling_goals_added_above_avg']}} <br/>
        Fouling Count Actions: {{player_goals_added_data['fouling_count_actions']}} <br/>
        Interrupting Goals Added Raw: {{player_goals_added_data['interrupting_goals_added_raw']}} <br/>
        Interrupting Goals Added Above Average: {{player_goals_added_data['interrupting_goals_added_above_avg']}} <br/>
        Interrupting Count Actions: {{player_goals_added_data['interrupting_count_actions']}} <br/>
        Passing Goals Added Raw: {{player_goals_added_data['passing_goals_added_raw']}} <br/>
        Passing Goals Added Above Average: {{player_goals_added_data['passing_goals_added_above_avg']}} <br/>
        Passing Count Actions: {{player_goals_added_data['passing_count_actions']}} <br/>
        Receiving Goals Added Raw: {{player_goals_added_data['receiving_goals_added_raw']}} <br/>
        Receiving Goals Added Above Average: {{player_goals_added_data['receiving_goals_added_above_avg']}} <br/>
        Receiving Count Actions: {{player_goals_added_data['receiving_count_actions']}} <br/>
        Shooting Goals Added Raw: {{player_goals_added_data['shooting_goals_added_raw']}} <br/>
        Shooting Goals Added Above Average: {{player_goals_added_data['shooting_goals_added_above_avg']}} <br/>
        Shooting Count Actions: {{player_goals_added_data['shooting_count_actions']}} <br/>
    </section>
</section>
{% endblock %}