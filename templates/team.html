{% extends 'base.html' %}

{% block content %}
<section class="report_outer_container">
    <section class="report">
        <section class="report_header">
            <div class="report_team_container">
                <img class="team_logo" src="{{ url_for('static', filename='img/' + team_xgoals_data['team_abbreviation'] + '.png') }}">
            </div>
            <div class="report_name_container">
                <h1 class="name_report">{{ team_xgoals_data['team_name'] }}</h1>
                <h2 class="report_name_subheader">{{ stadium['stadium_name'] }}</h2>
                <h2 class="report_name_subheader">{{ team_record['wins'] }} - {{ team_record['draws'] }} - {{ team_record['losses'] }}</h2>
                <div class="row_container">
                    {% for game in five_recent_games %}
                        <img class="icon" src="{{ url_for('static', filename='img/' + game.result + '.png') }}" alt="{{ game.result }}">
                    {% endfor %}
                </div>
            </div>
        </section>
        <div id="strength_donut"></div>


        <h2>Previous Matches</h2>
        <table>
            <thead>
                <tr>
                    <th>Date (EST)</th>
                    <th>Home Game</th>
                    <th>Result</th>
                    <th>Opponent</th>
                    <th>Short Name</th>
                    <th>Abbreviation</th>
                    <th>Goals Scored</th>
                    <th>Goals Against</th>
                </tr>
            </thead>
            <tbody>
                {% for game in game_results %}
                <tr>
                    <td>{{ game.date_time_est }}</td>
                    <td>{{ game.home_game }}</td>
                    <td>{{ game.result }}</td>
                    <td>{{ game.opponent_name }}</td>
                    <td>{{ game.opponent_short_name }}</td>
                    <td>{{ game.opponent_abbreviation }}</td>
                    <td>{{ game.goals_scored }}</td>
                    <td>{{ game.goals_against }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>




    
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        const fig = {{ strength_fig_json|safe }};
        const config = {{ strength_config|tojson }};
        Plotly.newPlot('strength_donut', fig.data, fig.layout, config);
    </script>


    </section>
</section>
{% endblock %}